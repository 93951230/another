<html>
	<head>
	</head>
	<body>
		<canvas id="canvas" style="position:absolute;top:0px;left:0px;"></canvas>
		<img id="game_start" style="display: none;" src="resource/gui/start.png">
		<script>
			var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            canvas.height = innerHeight;
            canvas.width = innerWidth;
			var game_start = false;
			var game_button = [];
			function button_create(img,x,y,width,height,command,drawMethod) {
                this.draw_img = img;
				this.height = height;
				this.width = width;
				this.x = x;
				this.y = y;
				this.drawMethod = drawMethod;
				this.command = command;
                this.draw = function () {
                    eval(this.drawMethod);
                }
			}
			var gene_bg = new function () {
				this.rgb = [210,10,85];
				this.overRed = 0;
				this.overGreen = 0;
				this.overBlue = 0;
				this.draw_bg = function () {
					ctx.beginPath();
					ctx.fillStyle ="rgb(" + this.rgb[0] + "," + this.rgb[1] + "," + this.rgb[2] + ")";
					ctx.rect(0, 0, canvas.width, canvas.height);
					ctx.fill();
					if ((this.rgb[0] > 220) || (this.rgb[0] < 80)) {
						this.overRed += 1;
					}
					if ((this.rgb[1] > 100) || (this.rgb[1] < 5)) {
						this.overGreen += 1;
					}
					if ((this.rgb[2] > 220) || (this.rgb[2] < 80)) {
						this.overBlue += 1;
					}
					if (this.overRed%2 == 1) {
						this.rgb[0] -= 0.5;
					}
					else {
						this.rgb[0] += 0.5;
					}
					if (this.overGreen%2 == 1) {
						this.rgb[1] -= 0.4;
					}
					else {
						this.rgb[1] += 0.4;
					}
					if (this.overBlue%2 == 1) {
						this.rgb[2] -= 0.5;
					}
					else {
						this.rgb[2] += 0.5;
					}

					ctx.closePath();
				}
			}
			function mouse(e) {
				if (e.buttons == 1) {
					if (game_start) {

					}
					else {
						start_button = null;
						game_start = !game_start;
					}
				}
			}
			document.addEventListener("mousedown", mouse, false);
			start_button = new button_create(document.getElementById("game_start"),10,10,100,100,"","ctx.drawImage(this.draw_img,this.x,this.y);");
			function game_render() {
				if (game_start) {
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					for (i = 0;i < game_button.length;i++) {
						game_button[i].draw();
					}
				}
				else {
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					canvas.width = innerWidth;
					canvas.height = innerHeight;
					gene_bg.draw_bg();
					start_button.draw();
				}
			}
			var game_loop = setInterval("game_render()",30);
		</script>
	</body>
</html>